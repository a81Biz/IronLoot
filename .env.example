# ===========================================
# Iron Loot - Environment Configuration
# ===========================================
# Copy this file to .env and adjust values as needed
# NEVER commit .env to version control

# -------------------------------------------
# Environment
# -------------------------------------------
NODE_ENV=development
# Options: development, qa, production

# -------------------------------------------
# API Configuration
# -------------------------------------------
API_PORT=3000
API_HOST=0.0.0.0

# -------------------------------------------
# Database (PostgreSQL)
# -------------------------------------------
DB_HOST=db
DB_PORT=5432
DB_NAME=ironloot_db
DB_USER=ironloot
DB_PASSWORD=ironloot_dev

# Full connection URL (auto-constructed in docker-compose)
# DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# -------------------------------------------
# Redis
# -------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=  # Uncomment if Redis auth is enabled

# Full connection URL
# REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# -------------------------------------------
# Logging & Observability
# -------------------------------------------
LOG_LEVEL=debug
# Options: debug, info, warn, error
# Note: debug is only enabled in development

TRACE_ENABLED=true
# Enable trace_id propagation

# -------------------------------------------
# Security & Authentication
# -------------------------------------------
# JWT Secret (use a strong random string in production)
JWT_SECRET=change_this_to_a_secure_random_string_in_production_min_32_chars

# JWT Access Token expiration (examples: 15m, 1h, 1d)
JWT_ACCESS_EXPIRY=15m

# JWT Refresh Token expiration (examples: 7d, 30d)
JWT_REFRESH_EXPIRY=7d

# Bcrypt salt rounds (higher = more secure but slower)
BCRYPT_SALT_ROUNDS=12

# Session secret (for cookie signing if needed)
SESSION_SECRET=another_secure_random_string_here

# -------------------------------------------
# Rate Limiting
# -------------------------------------------
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100
# 100 requests per 60 seconds per IP

# Critical endpoints have stricter limits (configured in code)
# - Login: 5 per minute
# - Register: 3 per minute  
# - Bid: 30 per minute

# -------------------------------------------
# pgAdmin (Development Tools)
# -------------------------------------------
PGADMIN_EMAIL=admin@ironloot.local
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# -------------------------------------------
# Business Rules (configurable)
# -------------------------------------------
# Soft-close window in seconds
AUCTION_SOFT_CLOSE_WINDOW_SEC=120

# Payment expiration in hours
PAYMENT_EXPIRATION_HOURS=72

# Dispute window in days (after delivery)
DISPUTE_WINDOW_DAYS=14
