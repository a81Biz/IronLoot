{% extends "layouts/main.html" %}

{% block title %}Mi Wallet - Iron Loot{% endblock %}

{% block styles %}
<link rel="stylesheet" href="/css/pages/wallet.css">
{% endblock %}

{% block content %}
<div class="wallet-header">
    <h1 class="wallet-title">Mi Wallet</h1>
</div>

<!-- Balance Card -->
<div class="wallet-balance-card">
    <div class="wallet-balance-label">Saldo Disponible</div>
    <div class="wallet-balance-value" id="walletBalance">$0.00</div>
    <div class="wallet-balance-held">
        Retenido: <span class="wallet-balance-held-value" id="walletHeld">$0.00</span>
    </div>
    
    <div class="wallet-actions">
        <button class="wallet-action-btn" data-modal-open="depositModal">
            <span class="material-symbols-outlined">add</span>
            Depositar
        </button>
        <button class="wallet-action-btn" data-modal-open="withdrawModal">
            <span class="material-symbols-outlined">remove</span>
            Retirar
        </button>
    </div>
</div>

<!-- Transaction History -->
<div class="wallet-history">
    <h2 class="wallet-history-title">Historial de Transacciones</h2>
    
    <div class="card">
        <div class="card-body" id="walletHistory">
            <p class="text-secondary text-center">Cargando historial...</p>
        </div>
    </div>
</div>

<!-- Deposit Modal -->
<div class="modal-backdrop" id="depositModalBackdrop"></div>
<div class="modal" id="depositModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Depositar Fondos</h3>
            <button class="modal-close" data-modal-close="depositModal">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <div class="modal-body">
            <form id="depositForm">
                <div class="form-group">
                    <label class="form-label" for="depositAmount">Monto a depositar</label>
                    <div class="form-input-wrapper">
                        <span class="form-input-icon" style="font-weight: bold;">$</span>
                        <input 
                            type="number" 
                            id="depositAmount" 
                            name="amount" 
                            class="form-input" 
                            placeholder="0.00"
                            min="10"
                            step="0.01"
                            required
                        >
                    </div>
                    <p class="form-help">Monto mínimo: $10.00</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Sugerencias rápidas</label>
                    <div style="display: flex; gap: var(--spacing-2);">
                        <button type="button" class="btn btn-secondary btn-sm deposit-suggestion" data-amount="50">$50</button>
                        <button type="button" class="btn btn-secondary btn-sm deposit-suggestion" data-amount="100">$100</button>
                        <button type="button" class="btn btn-secondary btn-sm deposit-suggestion" data-amount="200">$200</button>
                        <button type="button" class="btn btn-secondary btn-sm deposit-suggestion" data-amount="500">$500</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-modal-close="depositModal">Cancelar</button>
            <button class="btn btn-primary" id="btnDeposit">Depositar</button>
        </div>
    </div>
</div>

<!-- Withdraw Modal -->
<div class="modal-backdrop" id="withdrawModalBackdrop"></div>
<div class="modal" id="withdrawModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Retirar Fondos</h3>
            <button class="modal-close" data-modal-close="withdrawModal">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <div class="modal-body">
            <form id="withdrawForm">
                <div class="form-group">
                    <label class="form-label" for="withdrawAmount">Monto a retirar</label>
                    <div class="form-input-wrapper">
                        <span class="form-input-icon" style="font-weight: bold;">$</span>
                        <input 
                            type="number" 
                            id="withdrawAmount" 
                            name="amount" 
                            class="form-input" 
                            placeholder="0.00"
                            min="10"
                            step="0.01"
                            required
                        >
                    </div>
                    <p class="form-help">Disponible: <span id="withdrawAvailable">$0.00</span></p>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-modal-close="withdrawModal">Cancelar</button>
            <button class="btn btn-primary" id="btnWithdraw">Retirar</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/js/pages/wallet.js"></script>
{% endblock %}
