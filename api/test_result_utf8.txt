
> iron-loot-api@0.2.3 test
> jest

node.exe : FAIL test/u
nit/wallet/wallet.serv
ice.spec.ts (9.557 s)
En línea: 1 Carácter: 
1
+ & "C:\Program Files\
nodejs/node.exe" 
"C:\Program 
Files\nodejs/node_mo 
...
+ ~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~
~~~~~
    + CategoryInfo    
          : NotSpeci  
  fied: (FAIL test/   
 unit/...ec.ts (9.    
557 s):String) []    
, RemoteException
    + FullyQualifiedE 
   rrorId : NativeCo  
  mmandError
 
  ÔùÅ WalletService 
ÔÇ║ withdraw ÔÇ║ 
should throw error if 
insufficient funds

    expect(received).r
ejects.toThrow(expecte
d)

    Expected 
constructor: 
BadRequestException
    Received 
constructor: Insuffici
entBalanceException

    Received message: 
"Insufficient balance 
for transaction"

        [0m [90m 
126 |[39m
         [90m 127 
|[39m       
[36mif[39m (currentB
alance[33m.[39mlessT
han(amountDecimal)) {
        [31m[1m>[22
m[39m[90m 128 
|[39m         
[36mthrow[39m 
[36mnew[39m [33mIns
ufficientBalanceExcept
ion[39m(
         [90m     
|[39m               
[31m[1m^[22m[39m
         [90m 129 
|[39m           
userId[33m,[39m
         [90m 130 
|[39m           amoun
tDecimal[33m.[39mtoN
umber()[33m,[39m
         [90m 131 
|[39m           curre
ntBalance[33m.[39mto
Number()[33m,[39m[0
m

      at src/modules/w
allet/wallet.service.t
s:128:15
      at 
Object.toThrow (node_m
odules/expect/build/in
dex.js:218:22)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
service.spec.ts:140:72
)

FAIL test/unit/users/u
sers.service.spec.ts 
(9.736 s)
  ÔùÅ UsersService 
ÔÇ║ getPublicProfile 
ÔÇ║ should return 
public profile with 
limited data

    TypeError: Cannot 
read properties of 
undefined (reading 
'count')

    [0m [90m 422 
|[39m     
[36mconst[39m 
[sold[33m,[39m 
won[33m,[39m 
ratings] [33m=[39m 
[36mawait[39m [33mP
romise[39m[33m.[39m
all([
     [90m 423 |[39m 
      [90m// Sold: 
Auctions where user 
is seller and order 
exists (item actually 
sold)[39m
    [31m[1m>[22m[3
9m[90m 424 |[39m    
   [36mthis[39m[33m
.[39mprisma[33m.[39
morder[33m.[39mcount
({
     [90m     |[39m 
                      
  [31m[1m^[22m[39m
     [90m 425 |[39m 
        
where[33m:[39m { 
sellerId[33m:[39m 
userId[33m,[39m 
status[33m:[39m { 
not[33m:[39m 
[32m'CANCELLED'[39m 
} }[33m,[39m
     [90m 426 |[39m 
      })[33m,[39m
     [90m 427 |[39m 
      [90m// Won: 
Auctions where user 
is buyer[39m[0m

      at UsersService.
calculateUserStats (sr
c/modules/users/users.
service.ts:424:25)
      at UsersService.
getPublicProfile (src/
modules/users/users.se
rvice.ts:196:19)
      at 
Object.<anonymous> (te
st/unit/users/users.se
rvice.spec.ts:173:22)

  ÔùÅ UsersService 
ÔÇ║ getUserStats ÔÇ║ 
should return user 
statistics

    TypeError: Cannot 
read properties of 
undefined (reading 
'count')

    [0m [90m 422 
|[39m     
[36mconst[39m 
[sold[33m,[39m 
won[33m,[39m 
ratings] [33m=[39m 
[36mawait[39m [33mP
romise[39m[33m.[39m
all([
     [90m 423 |[39m 
      [90m// Sold: 
Auctions where user 
is seller and order 
exists (item actually 
sold)[39m
    [31m[1m>[22m[3
9m[90m 424 |[39m    
   [36mthis[39m[33m
.[39mprisma[33m.[39
morder[33m.[39mcount
({
     [90m     |[39m 
                      
  [31m[1m^[22m[39m
     [90m 425 |[39m 
        
where[33m:[39m { 
sellerId[33m:[39m 
userId[33m,[39m 
status[33m:[39m { 
not[33m:[39m 
[32m'CANCELLED'[39m 
} }[33m,[39m
     [90m 426 |[39m 
      })[33m,[39m
     [90m 427 |[39m 
      [90m// Won: 
Auctions where user 
is buyer[39m[0m

      at UsersService.
calculateUserStats (sr
c/modules/users/users.
service.ts:424:25)

FAIL test/unit/shipmen
ts/shipments.service.s
pec.ts (9.851 s)
  ÔùÅ 
ShipmentsService ÔÇ║ 
updateStatus ÔÇ║ 
should update status 
and set deliveredAt

    TypeError: this.pr
isma.order.update is 
not a function

    [0m [90m 119 
|[39m       
})[33m;[39m
     [90m 120 |[39m 
    } [36melse[39m 
[36mif[39m 
(dto[33m.[39mstatus 
[33m===[39m [33mShi
pmentStatus[39m[33m.
[39m[33mDELIVERED[3
9m) {
    [31m[1m>[22m[3
9m[90m 121 |[39m    
   [36mawait[39m [3
6mthis[39m[33m.[39m
prisma[33m.[39morder
[33m.[39mupdate({
     [90m     |[39m 
                      
        
[31m[1m^[22m[39m
     [90m 122 |[39m 
        
where[33m:[39m { 
id[33m:[39m shipment
[33m.[39morderId 
}[33m,[39m
     [90m 123 |[39m 
        
data[33m:[39m { 
status[33m:[39m 
[32m'DELIVERED'[39m 
}[33m,[39m
     [90m 124 |[39m 
      
})[33m;[39m[0m

      at ShipmentsServ
ice.updateStatus (src/
modules/shipments/ship
ments.service.ts:121:3
1)
      at 
Object.<anonymous> (te
st/unit/shipments/ship
ments.service.spec.ts:
139:22)

PASS test/unit/notific
ations/notifications.s
ervice.spec.ts
PASS src/modules/walle
t/wallet.service.spec.
ts (9.788 s)
PASS test/unit/ratings
/ratings.service.spec.
ts (9.795 s)
FAIL test/unit/dispute
s/disputes.service.spe
c.ts (10.066 s)
  ÔùÅ DisputesService 
ÔÇ║ create ÔÇ║ should 
create a dispute 
successfully

    
BadRequestException: 
Order must be PAID, 
SHIPPED or DELIVERED 
to open a dispute

    [0m [90m 42 
|[39m     [90m// 
Audit #24: Dispute 
validation[39m
     [90m 43 |[39m  
   [36mif[39m (order
[33m.[39mstatus 
[33m!==[39m 
[32m'DELIVERED'[39m 
[33m&&[39m order[33
m.[39mstatus 
[33m!==[39m 
[32m'PAID'[39m 
[33m&&[39m order[33
m.[39mstatus 
[33m!==[39m 
[32m'SHIPPED'[39m) {
    [31m[1m>[22m[3
9m[90m 44 |[39m     
  [36mthrow[39m 
[36mnew[39m [33mBad
RequestException[39m(
[32m'Order must be 
PAID, SHIPPED or 
DELIVERED to open a di
spute'[39m)[33m;[39
m
     [90m    |[39m  
           
[31m[1m^[22m[39m
     [90m 45 |[39m  
   }
     [90m 46 |[39m
     [90m 47 |[39m  
   [90m// Time 
limit: 30 days after 
update (delivery/payme
nt)[39m[0m

      at DisputesServi
ce.create (src/modules
/disputes/disputes.ser
vice.ts:44:13)
      at 
Object.<anonymous> (te
st/unit/disputes/dispu
tes.service.spec.ts:70
:22)

FAIL test/unit/auction
s/auctions.service.spe
c.ts (10.076 s)
  ÔùÅ AuctionsService 
ÔÇ║ create ÔÇ║ should 
create an auction if 
user is a seller

    
ValidationException: 
End date must be 
after start date

    [0m [90m 52 
|[39m
     [90m 53 |[39m  
   [36mif[39m 
(endsAt [33m<=[39m 
startsAt) {
    [31m[1m>[22m[3
9m[90m 54 |[39m     
  [36mthrow[39m 
[36mnew[39m [33mVal
idationException[39m(
[32m'End date must 
be after start 
date'[39m)[33m;[39m
     [90m    |[39m  
           
[31m[1m^[22m[39m
     [90m 55 |[39m  
   }
     [90m 56 |[39m
     [90m 57 |[39m  
   [90m// Only 
validate past date if 
user explicitly 
provided it (and not 
defaulting to 
now)[39m[0m

      at AuctionsServi
ce.create (src/modules
/auctions/auctions.ser
vice.ts:54:13)
      at 
Object.<anonymous> (te
st/unit/auctions/aucti
ons.service.spec.ts:11
3:22)

FAIL test/unit/bids/bi
ds.service.spec.ts 
(10.126 s)
  ÔùÅ BidsService ÔÇ║ 
should be defined

    Nest can't 
resolve dependencies 
of the BidsService 
(PrismaService, 
StructuredLogger, Requ
estContextService, ?, 
NotificationsService, 
AuditPersistenceServic
e, AuctionsGateway). 
Please make sure that 
the argument 
WalletService at 
index [3] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
WalletService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
WalletService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
WalletService */ ]
      })

    [0m [90m 33 
|[39m
     [90m 34 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 35 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 36 |[39m  
     
providers[33m:[39m [
     [90m 37 |[39m  
       [33mBidsServic
e[39m[33m,[39m
     [90m 38 |[39m  
       { 
provide[33m:[39m [3
3mPrismaService[39m[
33m,[39m 
useValue[33m:[39m 
mockPrismaService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 3)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/bids/bids.serv
ice.spec.ts:35:35)

FAIL test/unit/auth/au
th.service.spec.ts 
(10.239 s)
  ÔùÅ AuthService ÔÇ║ 
register ÔÇ║ should 
register a new user 
successfully

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
register ÔÇ║ should 
throw EmailAlreadyExis
tsException if email 
exists

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
login ÔÇ║ should 
login successfully 
with valid credentials

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
login ÔÇ║ should 
throw InvalidCredentia
lsException if user 
not found

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
login ÔÇ║ should 
throw InvalidCredentia
lsException if 
password is wrong

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
validateUser ÔÇ║ 
should return user 
for valid payload

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
validateUser ÔÇ║ 
should return null 
for banned user

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
logout ÔÇ║ should 
revoke specific 
session when 
refreshToken provided

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
logout ÔÇ║ should 
revoke all sessions 
when no refreshToken 
provided

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

PASS src/modules/diagn
ostics/diagnostics.con
troller.spec.ts 
(10.127 s)
FAIL test/unit/payment
s/payments.service.spe
c.ts (10.321 s)
  ÔùÅ PaymentsService 
ÔÇ║ should be defined

    Nest can't 
resolve dependencies 
of the 
PaymentsService (?). 
Please make sure that 
the argument 
StripeProvider at 
index [0] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
StripeProvider is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
StripeProvider is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
StripeProvider */ ]
      })

    [0m [90m 34 
|[39m
     [90m 35 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 36 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 37 |[39m  
     
providers[33m:[39m [
     [90m 38 |[39m  
       [33mPaymentsSe
rvice[39m[33m,[39m
     [90m 39 |[39m  
       [33mMercadoPag
oProvider[39m[33m,[
39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 0)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/payments/payme
nts.service.spec.ts:36
:35)

  ÔùÅ PaymentsService 
ÔÇ║ 
createCheckoutSession 
ÔÇ║ should create a 
payment session for 
Wallet Deposit

    Nest can't 
resolve dependencies 
of the 
PaymentsService (?). 
Please make sure that 
the argument 
StripeProvider at 
index [0] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
StripeProvider is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
StripeProvider is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
StripeProvider */ ]
      })

    [0m [90m 34 
|[39m
     [90m 35 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 36 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 37 |[39m  
     
providers[33m:[39m [
     [90m 38 |[39m  
       [33mPaymentsSe
rvice[39m[33m,[39m
     [90m 39 |[39m  
       [33mMercadoPag
oProvider[39m[33m,[
39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 0)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/payments/payme
nts.service.spec.ts:36
:35)

PASS src/modules/notif
ications/notifications
.controller.spec.ts
PASS test/unit/orders/
orders.service.spec.ts
PASS test/unit/health/
health.controller.spec
.ts
PASS test/unit/orders/
orders.controller.spec
.ts
PASS test/unit/users/u
sers.controller.spec.t
s (10.593 s)
PASS test/unit/auction
s/auctions.controller.
spec.ts (10.608 s)
PASS src/modules/dispu
tes/disputes.controlle
r.spec.ts
PASS src/modules/shipm
ents/shipments.control
ler.spec.ts
PASS src/modules/ratin
gs/ratings.controller.
spec.ts
PASS src/modules/payme
nts/payments.controlle
r.spec.ts
PASS src/modules/auth/
auth.controller.spec.t
s (10.74 s)
FAIL test/unit/wallet/
wallet.controller.spec
.ts (10.822 s)
  ÔùÅ 
WalletController ÔÇ║ 
getBalance ÔÇ║ should 
return balance

    Nest can't 
resolve dependencies 
of the 
WalletController 
(WalletService, 
PrismaService, ?). 
Please make sure that 
the argument 
PaymentsService at 
index [2] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
PaymentsService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
PaymentsService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
PaymentsService */ ]
      })

    [0m [90m 27 
|[39m
     [90m 28 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 29 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 30 |[39m  
     controllers[33m:
[39m [[33mWalletCont
roller[39m][33m,[39
m
     [90m 31 |[39m  
     
providers[33m:[39m [
     [90m 32 |[39m  
       { 
provide[33m:[39m [3
3mWalletService[39m[
33m,[39m 
useValue[33m:[39m 
mockWalletService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 2)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadController (nod
e_modules/@nestjs/core
/injector/injector.js:
89:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:68:
13
          at async 
Promise.all (index 0)
      at TestingInstan
ceLoader.createInstanc
esOfControllers (node_
modules/@nestjs/core/i
njector/instance-loade
r.js:67:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:42:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
controller.spec.ts:29:
35)

  ÔùÅ 
WalletController ÔÇ║ 
deposit ÔÇ║ should 
call service.deposit

    Nest can't 
resolve dependencies 
of the 
WalletController 
(WalletService, 
PrismaService, ?). 
Please make sure that 
the argument 
PaymentsService at 
index [2] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
PaymentsService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
PaymentsService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
PaymentsService */ ]
      })

    [0m [90m 27 
|[39m
     [90m 28 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 29 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 30 |[39m  
     controllers[33m:
[39m [[33mWalletCont
roller[39m][33m,[39
m
     [90m 31 |[39m  
     
providers[33m:[39m [
     [90m 32 |[39m  
       { 
provide[33m:[39m [3
3mWalletService[39m[
33m,[39m 
useValue[33m:[39m 
mockWalletService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 2)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadController (nod
e_modules/@nestjs/core
/injector/injector.js:
89:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:68:
13
          at async 
Promise.all (index 0)
      at TestingInstan
ceLoader.createInstanc
esOfControllers (node_
modules/@nestjs/core/i
njector/instance-loade
r.js:67:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:42:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
controller.spec.ts:29:
35)

  ÔùÅ 
WalletController ÔÇ║ 
getHistory ÔÇ║ should 
return history

    Nest can't 
resolve dependencies 
of the 
WalletController 
(WalletService, 
PrismaService, ?). 
Please make sure that 
the argument 
PaymentsService at 
index [2] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
PaymentsService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
PaymentsService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
PaymentsService */ ]
      })

    [0m [90m 27 
|[39m
     [90m 28 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 29 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 30 |[39m  
     controllers[33m:
[39m [[33mWalletCont
roller[39m][33m,[39
m
     [90m 31 |[39m  
     
providers[33m:[39m [
     [90m 32 |[39m  
       { 
provide[33m:[39m [3
3mWalletService[39m[
33m,[39m 
useValue[33m:[39m 
mockWalletService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 2)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadController (nod
e_modules/@nestjs/core
/injector/injector.js:
89:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:68:
13
          at async 
Promise.all (index 0)
      at TestingInstan
ceLoader.createInstanc
esOfControllers (node_
modules/@nestjs/core/i
njector/instance-loade
r.js:67:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:42:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
controller.spec.ts:29:
35)

PASS test/unit/bids/bi
ds.controller.spec.ts

Summary of all 
failing tests
FAIL test/unit/wallet/
wallet.service.spec.ts
 (9.557 s)
  ÔùÅ WalletService 
ÔÇ║ withdraw ÔÇ║ 
should throw error if 
insufficient funds

    expect(received).r
ejects.toThrow(expecte
d)

    Expected 
constructor: 
BadRequestException
    Received 
constructor: Insuffici
entBalanceException

    Received message: 
"Insufficient balance 
for transaction"

        [0m [90m 
126 |[39m
         [90m 127 
|[39m       
[36mif[39m (currentB
alance[33m.[39mlessT
han(amountDecimal)) {
        [31m[1m>[22
m[39m[90m 128 
|[39m         
[36mthrow[39m 
[36mnew[39m [33mIns
ufficientBalanceExcept
ion[39m(
         [90m     
|[39m               
[31m[1m^[22m[39m
         [90m 129 
|[39m           
userId[33m,[39m
         [90m 130 
|[39m           amoun
tDecimal[33m.[39mtoN
umber()[33m,[39m
         [90m 131 
|[39m           curre
ntBalance[33m.[39mto
Number()[33m,[39m[0
m

      at src/modules/w
allet/wallet.service.t
s:128:15
      at 
Object.toThrow (node_m
odules/expect/build/in
dex.js:218:22)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
service.spec.ts:140:72
)

FAIL test/unit/users/u
sers.service.spec.ts 
(9.736 s)
  ÔùÅ UsersService 
ÔÇ║ getPublicProfile 
ÔÇ║ should return 
public profile with 
limited data

    TypeError: Cannot 
read properties of 
undefined (reading 
'count')

    [0m [90m 422 
|[39m     
[36mconst[39m 
[sold[33m,[39m 
won[33m,[39m 
ratings] [33m=[39m 
[36mawait[39m [33mP
romise[39m[33m.[39m
all([
     [90m 423 |[39m 
      [90m// Sold: 
Auctions where user 
is seller and order 
exists (item actually 
sold)[39m
    [31m[1m>[22m[3
9m[90m 424 |[39m    
   [36mthis[39m[33m
.[39mprisma[33m.[39
morder[33m.[39mcount
({
     [90m     |[39m 
                      
  [31m[1m^[22m[39m
     [90m 425 |[39m 
        
where[33m:[39m { 
sellerId[33m:[39m 
userId[33m,[39m 
status[33m:[39m { 
not[33m:[39m 
[32m'CANCELLED'[39m 
} }[33m,[39m
     [90m 426 |[39m 
      })[33m,[39m
     [90m 427 |[39m 
      [90m// Won: 
Auctions where user 
is buyer[39m[0m

      at UsersService.
calculateUserStats (sr
c/modules/users/users.
service.ts:424:25)
      at UsersService.
getPublicProfile (src/
modules/users/users.se
rvice.ts:196:19)
      at 
Object.<anonymous> (te
st/unit/users/users.se
rvice.spec.ts:173:22)

  ÔùÅ UsersService 
ÔÇ║ getUserStats ÔÇ║ 
should return user 
statistics

    TypeError: Cannot 
read properties of 
undefined (reading 
'count')

    [0m [90m 422 
|[39m     
[36mconst[39m 
[sold[33m,[39m 
won[33m,[39m 
ratings] [33m=[39m 
[36mawait[39m [33mP
romise[39m[33m.[39m
all([
     [90m 423 |[39m 
      [90m// Sold: 
Auctions where user 
is seller and order 
exists (item actually 
sold)[39m
    [31m[1m>[22m[3
9m[90m 424 |[39m    
   [36mthis[39m[33m
.[39mprisma[33m.[39
morder[33m.[39mcount
({
     [90m     |[39m 
                      
  [31m[1m^[22m[39m
     [90m 425 |[39m 
        
where[33m:[39m { 
sellerId[33m:[39m 
userId[33m,[39m 
status[33m:[39m { 
not[33m:[39m 
[32m'CANCELLED'[39m 
} }[33m,[39m
     [90m 426 |[39m 
      })[33m,[39m
     [90m 427 |[39m 
      [90m// Won: 
Auctions where user 
is buyer[39m[0m

      at UsersService.
calculateUserStats (sr
c/modules/users/users.
service.ts:424:25)

FAIL test/unit/shipmen
ts/shipments.service.s
pec.ts (9.851 s)
  ÔùÅ 
ShipmentsService ÔÇ║ 
updateStatus ÔÇ║ 
should update status 
and set deliveredAt

    TypeError: this.pr
isma.order.update is 
not a function

    [0m [90m 119 
|[39m       
})[33m;[39m
     [90m 120 |[39m 
    } [36melse[39m 
[36mif[39m 
(dto[33m.[39mstatus 
[33m===[39m [33mShi
pmentStatus[39m[33m.
[39m[33mDELIVERED[3
9m) {
    [31m[1m>[22m[3
9m[90m 121 |[39m    
   [36mawait[39m [3
6mthis[39m[33m.[39m
prisma[33m.[39morder
[33m.[39mupdate({
     [90m     |[39m 
                      
        
[31m[1m^[22m[39m
     [90m 122 |[39m 
        
where[33m:[39m { 
id[33m:[39m shipment
[33m.[39morderId 
}[33m,[39m
     [90m 123 |[39m 
        
data[33m:[39m { 
status[33m:[39m 
[32m'DELIVERED'[39m 
}[33m,[39m
     [90m 124 |[39m 
      
})[33m;[39m[0m

      at ShipmentsServ
ice.updateStatus (src/
modules/shipments/ship
ments.service.ts:121:3
1)
      at 
Object.<anonymous> (te
st/unit/shipments/ship
ments.service.spec.ts:
139:22)

FAIL test/unit/dispute
s/disputes.service.spe
c.ts (10.066 s)
  ÔùÅ DisputesService 
ÔÇ║ create ÔÇ║ should 
create a dispute 
successfully

    
BadRequestException: 
Order must be PAID, 
SHIPPED or DELIVERED 
to open a dispute

    [0m [90m 42 
|[39m     [90m// 
Audit #24: Dispute 
validation[39m
     [90m 43 |[39m  
   [36mif[39m (order
[33m.[39mstatus 
[33m!==[39m 
[32m'DELIVERED'[39m 
[33m&&[39m order[33
m.[39mstatus 
[33m!==[39m 
[32m'PAID'[39m 
[33m&&[39m order[33
m.[39mstatus 
[33m!==[39m 
[32m'SHIPPED'[39m) {
    [31m[1m>[22m[3
9m[90m 44 |[39m     
  [36mthrow[39m 
[36mnew[39m [33mBad
RequestException[39m(
[32m'Order must be 
PAID, SHIPPED or 
DELIVERED to open a di
spute'[39m)[33m;[39
m
     [90m    |[39m  
           
[31m[1m^[22m[39m
     [90m 45 |[39m  
   }
     [90m 46 |[39m
     [90m 47 |[39m  
   [90m// Time 
limit: 30 days after 
update (delivery/payme
nt)[39m[0m

      at DisputesServi
ce.create (src/modules
/disputes/disputes.ser
vice.ts:44:13)
      at 
Object.<anonymous> (te
st/unit/disputes/dispu
tes.service.spec.ts:70
:22)

FAIL test/unit/auction
s/auctions.service.spe
c.ts (10.076 s)
  ÔùÅ AuctionsService 
ÔÇ║ create ÔÇ║ should 
create an auction if 
user is a seller

    
ValidationException: 
End date must be 
after start date

    [0m [90m 52 
|[39m
     [90m 53 |[39m  
   [36mif[39m 
(endsAt [33m<=[39m 
startsAt) {
    [31m[1m>[22m[3
9m[90m 54 |[39m     
  [36mthrow[39m 
[36mnew[39m [33mVal
idationException[39m(
[32m'End date must 
be after start 
date'[39m)[33m;[39m
     [90m    |[39m  
           
[31m[1m^[22m[39m
     [90m 55 |[39m  
   }
     [90m 56 |[39m
     [90m 57 |[39m  
   [90m// Only 
validate past date if 
user explicitly 
provided it (and not 
defaulting to 
now)[39m[0m

      at AuctionsServi
ce.create (src/modules
/auctions/auctions.ser
vice.ts:54:13)
      at 
Object.<anonymous> (te
st/unit/auctions/aucti
ons.service.spec.ts:11
3:22)

FAIL test/unit/bids/bi
ds.service.spec.ts 
(10.126 s)
  ÔùÅ BidsService ÔÇ║ 
should be defined

    Nest can't 
resolve dependencies 
of the BidsService 
(PrismaService, 
StructuredLogger, Requ
estContextService, ?, 
NotificationsService, 
AuditPersistenceServic
e, AuctionsGateway). 
Please make sure that 
the argument 
WalletService at 
index [3] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
WalletService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
WalletService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
WalletService */ ]
      })

    [0m [90m 33 
|[39m
     [90m 34 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 35 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 36 |[39m  
     
providers[33m:[39m [
     [90m 37 |[39m  
       [33mBidsServic
e[39m[33m,[39m
     [90m 38 |[39m  
       { 
provide[33m:[39m [3
3mPrismaService[39m[
33m,[39m 
useValue[33m:[39m 
mockPrismaService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 3)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/bids/bids.serv
ice.spec.ts:35:35)

FAIL test/unit/auth/au
th.service.spec.ts 
(10.239 s)
  ÔùÅ AuthService ÔÇ║ 
register ÔÇ║ should 
register a new user 
successfully

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
register ÔÇ║ should 
throw EmailAlreadyExis
tsException if email 
exists

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
login ÔÇ║ should 
login successfully 
with valid credentials

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
login ÔÇ║ should 
throw InvalidCredentia
lsException if user 
not found

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
login ÔÇ║ should 
throw InvalidCredentia
lsException if 
password is wrong

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
validateUser ÔÇ║ 
should return user 
for valid payload

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
validateUser ÔÇ║ 
should return null 
for banned user

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
logout ÔÇ║ should 
revoke specific 
session when 
refreshToken provided

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

  ÔùÅ AuthService ÔÇ║ 
logout ÔÇ║ should 
revoke all sessions 
when no refreshToken 
provided

    Nest can't 
resolve dependencies 
of the AuthService 
(PrismaService, 
ConfigService, 
JwtService, 
StructuredLogger, Requ
estContextService, 
MetricsService, AuditP
ersistenceService, ?, 
TwoFactorAuthService).
 Please make sure 
that the argument 
EmailService at index 
[7] is available in 
the RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If EmailService 
is a provider, is it 
part of the current 
RootTestModule?
    - If EmailService 
is exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
EmailService */ ]
      })

    [0m [90m 62 
|[39m
     [90m 63 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 64 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 65 |[39m  
     
providers[33m:[39m [
     [90m 66 |[39m  
       [33mAuthServic
e[39m[33m,[39m
     [90m 67 |[39m  
       {[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 7)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/auth/auth.serv
ice.spec.ts:64:35)

FAIL test/unit/payment
s/payments.service.spe
c.ts (10.321 s)
  ÔùÅ PaymentsService 
ÔÇ║ should be defined

    Nest can't 
resolve dependencies 
of the 
PaymentsService (?). 
Please make sure that 
the argument 
StripeProvider at 
index [0] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
StripeProvider is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
StripeProvider is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
StripeProvider */ ]
      })

    [0m [90m 34 
|[39m
     [90m 35 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 36 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 37 |[39m  
     
providers[33m:[39m [
     [90m 38 |[39m  
       [33mPaymentsSe
rvice[39m[33m,[39m
     [90m 39 |[39m  
       [33mMercadoPag
oProvider[39m[33m,[
39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 0)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/payments/payme
nts.service.spec.ts:36
:35)

  ÔùÅ PaymentsService 
ÔÇ║ 
createCheckoutSession 
ÔÇ║ should create a 
payment session for 
Wallet Deposit

    Nest can't 
resolve dependencies 
of the 
PaymentsService (?). 
Please make sure that 
the argument 
StripeProvider at 
index [0] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
StripeProvider is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
StripeProvider is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
StripeProvider */ ]
      })

    [0m [90m 34 
|[39m
     [90m 35 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 36 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 37 |[39m  
     
providers[33m:[39m [
     [90m 38 |[39m  
       [33mPaymentsSe
rvice[39m[33m,[39m
     [90m 39 |[39m  
       [33mMercadoPag
oProvider[39m[33m,[
39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 0)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadProvider (node_
modules/@nestjs/core/i
njector/injector.js:98
:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:56:
13
          at async 
Promise.all (index 3)
      at TestingInstan
ceLoader.createInstanc
esOfProviders (node_mo
dules/@nestjs/core/inj
ector/instance-loader.
js:55:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:40:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/payments/payme
nts.service.spec.ts:36
:35)

FAIL test/unit/wallet/
wallet.controller.spec
.ts (10.822 s)
  ÔùÅ 
WalletController ÔÇ║ 
getBalance ÔÇ║ should 
return balance

    Nest can't 
resolve dependencies 
of the 
WalletController 
(WalletService, 
PrismaService, ?). 
Please make sure that 
the argument 
PaymentsService at 
index [2] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
PaymentsService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
PaymentsService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
PaymentsService */ ]
      })

    [0m [90m 27 
|[39m
     [90m 28 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 29 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 30 |[39m  
     controllers[33m:
[39m [[33mWalletCont
roller[39m][33m,[39
m
     [90m 31 |[39m  
     
providers[33m:[39m [
     [90m 32 |[39m  
       { 
provide[33m:[39m [3
3mWalletService[39m[
33m,[39m 
useValue[33m:[39m 
mockWalletService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 2)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadController (nod
e_modules/@nestjs/core
/injector/injector.js:
89:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:68:
13
          at async 
Promise.all (index 0)
      at TestingInstan
ceLoader.createInstanc
esOfControllers (node_
modules/@nestjs/core/i
njector/instance-loade
r.js:67:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:42:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
controller.spec.ts:29:
35)

  ÔùÅ 
WalletController ÔÇ║ 
deposit ÔÇ║ should 
call service.deposit

    Nest can't 
resolve dependencies 
of the 
WalletController 
(WalletService, 
PrismaService, ?). 
Please make sure that 
the argument 
PaymentsService at 
index [2] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
PaymentsService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
PaymentsService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
PaymentsService */ ]
      })

    [0m [90m 27 
|[39m
     [90m 28 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 29 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 30 |[39m  
     controllers[33m:
[39m [[33mWalletCont
roller[39m][33m,[39
m
     [90m 31 |[39m  
     
providers[33m:[39m [
     [90m 32 |[39m  
       { 
provide[33m:[39m [3
3mWalletService[39m[
33m,[39m 
useValue[33m:[39m 
mockWalletService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 2)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadController (nod
e_modules/@nestjs/core
/injector/injector.js:
89:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:68:
13
          at async 
Promise.all (index 0)
      at TestingInstan
ceLoader.createInstanc
esOfControllers (node_
modules/@nestjs/core/i
njector/instance-loade
r.js:67:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:42:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
controller.spec.ts:29:
35)

  ÔùÅ 
WalletController ÔÇ║ 
getHistory ÔÇ║ should 
return history

    Nest can't 
resolve dependencies 
of the 
WalletController 
(WalletService, 
PrismaService, ?). 
Please make sure that 
the argument 
PaymentsService at 
index [2] is 
available in the 
RootTestModule 
context.

    Potential 
solutions:
    - Is 
RootTestModule a 
valid NestJS module?
    - If 
PaymentsService is a 
provider, is it part 
of the current 
RootTestModule?
    - If 
PaymentsService is 
exported from a 
separate @Module, is 
that module imported 
within RootTestModule?
      @Module({
        imports: [ /* 
the Module containing 
PaymentsService */ ]
      })

    [0m [90m 27 
|[39m
     [90m 28 |[39m  
 beforeEach([36masync
[39m () [33m=>[39m 
{
    [31m[1m>[22m[3
9m[90m 29 |[39m     
[36mconst[39m 
module[33m:[39m [33
mTestingModule[39m 
[33m=[39m 
[36mawait[39m [33mT
est[39m[33m.[39mcre
ateTestingModule({
     [90m    |[39m  
                      
           
[31m[1m^[22m[39m
     [90m 30 |[39m  
     controllers[33m:
[39m [[33mWalletCont
roller[39m][33m,[39
m
     [90m 31 |[39m  
     
providers[33m:[39m [
     [90m 32 |[39m  
       { 
provide[33m:[39m [3
3mWalletService[39m[
33m,[39m 
useValue[33m:[39m 
mockWalletService 
}[33m,[39m[0m

      at TestingInject
or.lookupComponentInPa
rentModules (node_modu
les/@nestjs/core/injec
tor/injector.js:262:19
)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/core/injector/in
jector.js:215:33)
      at TestingInject
or.resolveComponentIns
tance (node_modules/@n
estjs/testing/testing-
injector.js:19:45)
      at resolveParam 
(node_modules/@nestjs/
core/injector/injector
.js:129:38)
          at async 
Promise.all (index 2)
      at TestingInject
or.resolveConstructorP
arams (node_modules/@n
estjs/core/injector/in
jector.js:144:27)
      at TestingInject
or.loadInstance (node_
modules/@nestjs/core/i
njector/injector.js:70
:13)
      at TestingInject
or.loadController (nod
e_modules/@nestjs/core
/injector/injector.js:
89:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:68:
13
          at async 
Promise.all (index 0)
      at TestingInstan
ceLoader.createInstanc
esOfControllers (node_
modules/@nestjs/core/i
njector/instance-loade
r.js:67:9)
      at node_modules/
@nestjs/core/injector/
instance-loader.js:42:
13
          at async 
Promise.all (index 1)
      at TestingInstan
ceLoader.createInstanc
es (node_modules/@nest
js/core/injector/insta
nce-loader.js:39:9)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/core/
injector/instance-load
er.js:22:13)
      at TestingInstan
ceLoader.createInstanc
esOfDependencies (node
_modules/@nestjs/testi
ng/testing-instance-lo
ader.js:9:9)
      at TestingModule
Builder.createInstance
sOfDependencies (node_
modules/@nestjs/testin
g/testing-module.build
er.js:118:9)
      at TestingModule
Builder.compile (node_
modules/@nestjs/testin
g/testing-module.build
er.js:74:9)
      at 
Object.<anonymous> (te
st/unit/wallet/wallet.
controller.spec.ts:29:
35)


Test Suites: 9 
failed, 16 passed, 25 
total
Tests:       21 
failed, 99 passed, 
120 total
Snapshots:   0 total
Time:        11.874 
s, estimated 21 s
Ran all test suites.
